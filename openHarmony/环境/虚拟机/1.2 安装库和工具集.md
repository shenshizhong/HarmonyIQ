
源代码的下载和编译
安装git 注意点
```
当你的rsa 和 rsa.pub 是从其他地方拷贝过来的，一定要重新用命令行，加权限

这些是配置提交的账号信息
git config --global user.name "ssz"
git config --global user.email "786514885@qq.conm"
git config --global credential.helper store

```

repo 初始化以及下载项目
```
cd ~
mkdir oh40       #在根目录下创建oh40
cd oh40          #进入oh40路径拉取代码

repo init -u git@gitee.com:openharmony/manifest.git -b OpenHarmony-4.0-Release --no-repo-verify
repo sync -c -j8        //这里一定要用j8 这样保证不会有文件下载不下来
repo forall -c 'git lfs pull'

执行prebuilts：
bash build/prebuilts_download.sh

安装编译工具：
python3 -m pip install --user build/hb
vim ~/.bashrc
export PATH=~/.local/bin:$PATH
source ~/.bashrc

编译源码：（18：07 开始编译 ）
./build.sh --product-name rk3568 --ccache  #./build.sh --product-name rk3568 --target-cpu arm64 --ccache

curl -sL https://deb.nodesource.com/setup_14.2.1 | sudo -E bash -

或者
./build.sh --product-name rk3568 --ccache --no-prebuilt-sdk 
```

编译遇到的问题
```

一：nodejs 版本需要14.21.1

解决：
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash
source ~/.bashrc  # 或 ~/.zshrc, ~/.bash_profile
nvm install 14.21.1
nvm use 14.21.1
node -v  # 应该显示 v14.21.1

二：gcc-arm-linux-gnueabi  交叉工具链没有安装

sudo apt update
sudo apt install gcc-arm-linux-gnueabi
arm-linux-gnueabi-gcc --version

三、编译报错的处理方案
1、
编译报错，一个是build.sh 没有读写权限，直接加一个权限就好了。
加完权限，该文件不是白色，就说明权限加上了
chmod a+x device/board/hihope/rk3568/kernel/build_kernel.sh    （先进到目录下 再chmod a+x build_kernel.sh）

2、
如果build.sh 已经加了权限还是报错，那么直接把根目录下的out 直接删掉即可 （之前编译过一次，导致已经存在同一个文件）

```

提高编译的速度
```
一、硬件上
1、使用NVMe SSD，
2、内存扩容，使用 64G RAM

二、技巧上
1、启用 ccache 加速
2、善用增量编译，而非每次都全量编译（只编译修改过的代码）
3、预编译模块复用
4、尝试使用最小系统配置进行编译，逐步添加功能  （Hi3861、ESP32）
5、UT框架，可以对c/c++代码进行测试，还有就是单元测试

```

```
全量编译：
hb build -f

增量编译：
hb build[moudule_name]

加快编译速度的参数
hb build --ccache --fast-rebuild

```


远程一个新的项目
```
通过DevEcoTool -> File -> Open Folder -> /home/ssz/sszhome/workplace/uboot/

```
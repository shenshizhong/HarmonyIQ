
5.0 的源码
appspawn
```
appspawn.cfg 所在位置   cd etc/init
查看appspawn.cfg 的内容   cat appspawn.cfg

appmgr 请求 appspawn，通过socket 进行请求的

进程 appspawn 的编号是 254 
查看由 254 进程启动的其他进程：  ps -ef | grep  254 

ohos_executable("appspawn"){
    sources=["${appspawn_path}/standard/appspawn_main.c"]
}

appspawn_main:
main 为入口
1、appspawn 启动 （这个是系统启动后，会走的）
2、StartSpawnService  正式启动spawn 服务
3、runAppSpawn   会运行一个looper


StartSpawnService：
1、获取传进来的参数
2、AppSpawnLoadAutoRunModules(MODULE_COMMON);
3、AppSpawnCreateContent  创建一个spawn 的上下文

cd /system/lib/appspawn/   这里头有很多.so 文件

AppSpawnCreateContent：执行服务创建的过程
1、AppSpawnRun    
2、CreateAppSpawnServer


AppSpawnRun：
1、LE_CreateSignalTask   创建signal 信号
2、LE_RunLoop(LE_GetDefaultLoop()); 就是一个死循环，然后运行起来，这里appspawn 就可以开始工作了
3、ServerStageHookExecute   类似切片，也就是执行一个钩子函数


CreateAppSpawnServer：
1、GetControlSocket(socketName) //创建socket
2、info.incommingConnect = OnConnection  //设置socket 服务端连接函数  （当有连接请求进来的时候，就调用 OnConnection 处理）
3、LE_CreateStreamServer(LE_GetDefaultLoop()) //创建socket 服务器
4、

OnConnection：
1、LE_AcceptStreamClient   

LE_CreateStreamServer：
1、info->socketId;   //获取socket 的id
2、CreateSocket    //服务端就创建出来了
3、listenSocket    //监听
4、通过 loopHandle 获取 loop 对象

```

ohos_executable("appspawn")     base/startup/appspawn/standard/BUILD.gn
appspawn_main           base/startup/appspawn/standard/appspawn_main.c
StartSpawnService         base/startup/appspawn/standard/appspawn_service.c
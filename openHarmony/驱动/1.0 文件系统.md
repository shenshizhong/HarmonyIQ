

文件系统
```
提供数据存储和管理的能力

FAT文件系统
LittleFS
SPIFFS
JFFS2/YAFFS

POSIX标准接口：
open(), read(), write(), close()

鸿蒙特有API：
//文件操作
int32_t Open(const char *path, int oflags);
int32_t Close(int fd);

//目录操作
DIR *Opendir(const char *dirname);
int32_t Closedir(DIR *dir);

文件系统管理API：
//挂载文件系统
int mount(const char *source, const char *target, const char *filesystemtype, 
unsigned long mountflags, const void *data);
卸载文件系统
int umount(const char *target);

文件系统开发实践
1、配置文件系统，在config.json中配置所需的文件系统组件：
{
    "subsystem": "file_system",
    "componnents":[{"component": "fatfs", "features":[]},
    {"component": "littlefs", "features":[]}
    ]
}

2、初始化文件系统：
#include "fs/fs.h"
void init_filesystem(){
    //初始化存储设备
    storage_dev_init();
    //挂载文件系统
    if(mount("/dev/flash0", "/storage", "littlefs", 0, NULL) != 0){
        printf("Mount littlefs failed\n");
    }
}

文件操作示例：
int fd = Open("/storage/config.txt", O_RDWR | O_CREAT);
if(fd < 0){
    printf("Open file failed\n");
    reurn;
}
char buf[128] = "Hello HarmonyOS";
int ret = Write(fd, buf, strlen(buf));
if(ret < 0){
    printf("Write file failed\n");
}

Close(fd);


文件系统优化考虑:针对NOR Flash、NAND Flash 等不同介质选择合适文件系统
掉电保护：确保意外断电时数据完整性
磨损均衡： 延长Flash 存储寿命
内存占用： 在资源受限设备上优化内存使用

物联网设备通常基于嵌入式系统：
智能温控器 = 嵌入式系统 （控制逻辑） + 联网模式 （上传数据到云）

趋势融合：现在嵌入式系统越来越多集成联网功能
仅嵌入式： 汽车ABS防抱死系统（实时控制，无需联网）
物联网设备：共享单车GPS锁（嵌入式控制 + 4G联网 + 云端计费）

```

```
检查硬件依赖：
内存操作（字节序，对齐要求）
unsigned char inb(unsigned short port);
字节序处理
#include <linux/byteorder/generic.h>
u32 le32_to_cpu(u32 data); //小端转CPU 字节序
u32 cpu_to_len32(u32 data);//cpu字节序转小端



```